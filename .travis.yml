language: php

php:
  - 7.4
  - 8.0
before_script:
  - git clone https://github.com/php-geospatial/geospatial.git
  - cd geospatial
  - phpize
  - ./configure --enable-geospatial
  - make
  - sudo make install
  - echo "extension=geospatial.so" >> ~/.phpenv/versions/$(phpenv version-name)/etc/php.ini
  - cd ..
install:
  - composer install
script:
  - php vendor/bin/psalm --show-info=false
  - php vendor/bin/phpunit --coverage-text
